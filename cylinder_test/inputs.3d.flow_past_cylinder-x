amrex.profile = 1
amrex.fork_join.verbose = 1

#¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨#
#            SIMULATION STOP            #
#.......................................#
stop_time               =   50         # Max (simulated) time to evolve
max_step                =  -1           # Max number of time steps
#¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨#
#           SOLVER SETTINGS             #
#.......................................#
ns.init_iter       = 3                  # How many initial pressure iterations
ns.init_vel_iter   = 3                  # How many initial projeciton iterations to ensure velocity satisfies divergence constraint 
ns.visc_tol        = 1.0e-11            # tolerance for viscous solve
#¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨#
#         TIME STEP COMPUTATION         #
#.......................................#
# ns.fixed_dt         =   0.05            # If fixed_dt > 0, use this constant dt
ns.cfl              =   0.5            # CFL factor
#¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨#
#            INPUT AND OUTPUT           #
#.......................................#
# Choose which quantities to write to plot file
amr.plot_vars    		= ALL
amr.derive_plot_vars 	= mag_vort vorticity
# amr.plot_int            =   20        # Steps between plot files
amr.plot_per            =   1         # Steps between plot files
amr.check_int           =   100         # Steps between checkpoint files
amr.restart             =   ""          # Checkpoint to restart from
#¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨#
#               PHYSICS                 #
#.......................................#
ns.gravity               =   0. 
ns.vel_visc_coef         = 0.0025
ns.scal_diff_coefs       = 1.0
#¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨#
#        ADAPTIVE MESH REFINEMENT       #
#.......................................#
amr.n_cell              =   128 48 32    # Grid cells at coarsest AMRlevel
amr.max_level           =   3           # Max AMR level in hierarchy
# Refinement criterion, presence of tracer
amr.refinement_indicators = vorticity
amr.vorticity.vorticity_greater =  0.5
# Interval (in number of level l timesteps) between regridding
amr.regrid_int                  = 10
# Refinement ratio as a function of level
amr.ref_ratio                   = 2 2 2 2
amr.max_grid_size_x             = 48
amr.max_grid_size_y             = 16
amr.max_grid_size_z             = 16
# Factor by which grids must be coarsenable.
amr.blocking_factor     = 8
# amr.blocking_factor_x           = 8
# amr.blocking_factor_y           = 8
# amr.blocking_factor_z           = 4
# Grid efficiency (defaults to .70)
amr.grid_eff = 0.5
# Refinement around the EB by default
#¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨#
#              GEOMETRY                 #
#.......................................#
geometry.prob_lo        =   -5.12  -4.8  -3.2  # Lo corner coordinates
geometry.prob_hi        =   20.48 4.8 3.2 # Hi corner coordinates
geometry.is_periodic    =   0   0   1   # Periodicity x y z (0/1)

# 0 = Interior/Periodic  3 = Symmetry
# 1 = Inflow             4 = SlipWall
# 2 = Outflow            5 = NoSlipWal
# Boundary conditions on the low end of the domain.
ns.lo_bc 	     	= 1 4 0
# Boundary conditions on the high end of the domain.
ns.hi_bc   	      	= 2 4 0

xlo.velocity = 1. 0. 0.

# Add cylinder
eb2.geom_type                 = cylinder
eb2.cylinder_has_fluid_inside = 0
eb2.cylinder_radius           = 0.5
eb2.cylinder_direction        = 2
eb2.cylinder_center           = 0.0  0.0  0.0

#¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨#
#          PROBLEM PARAMETERS           #
#.......................................#

prob.probtype = 4
prob.blob_center = -2. 0.0 0.0
prob.blob_radius =  0.05
# Constant density initial condition
prob.density_ic = 1.0
# Set up a flow, defaults to zero
prob.velocity_ic = 1. 0. 0.

#¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨#
#              VERBOSITY                #
#.......................................#
amr.v 	            	= 0 # AMR (top-level)
ns.v                    = 1 # NS solver
nodal_proj.verbose      = 0 # Nodal projection
mac_proj.verbose        = 0 # MacProjector
diffuse.v               = 0 # Diffusion operator

amr.grid_log = grdlog
amr.run_log = runlog
amr.run_log_terse = runlogterse
amr.use_gpu = 1
amrex.the_arena_is_managed = 0
amrex.gpu_mem_report = 1
amrex.gpu_stream_profile = 1
